# Extending Accurate Time Distribution and Timeliness Capabilities Over the Air to Enable Future Wireless Industrial Automation Systems

- Proceeding of IEEE.


## INTRODUCTION

- New industrial applications require the **time coordinated** **computing** and **communications** over **wireless** links
  - Ex. AVG/MR
- Some application requires
  - Precise synchronization to a reference time down to **nanoseconds accuracy**
  - Deterministic (bounded) end-to-end latency
    - in us to ms level
  - Extremely low packet loss probability
  - Coverage of time critical and noncritical taffics in the same network.
- IEEE 802.1 TSN Task Group develops standards to enable time synchronization, bounded latency, redundancy, preemption.

## STATE-OF-THE-ARTCOMMUNICATIONS AND NETWORKING FOR INDUSTRIAL AUTOMATION

### Industrial Networks
![Imgur](https://i.imgur.com/gMs2sQP.png)
- **Field Level** 
  - communication among **sensor**, **actuators**, and **controllers** 
  - typically has the most stringent **latency** and **reliability** requirements
  - Throughput requirements relatively low 
  - extremely short cycle times (in the order of microseconds) and low jitter
    - PROFINET, EtherCAT, and SERCOS III
  - IEC 61784 International Standard
- **Cell Level**
  - mostly communications between PLCs(Programmable Logic Controller) and between PLCs and industrial PCs
  - require time synchronization and various levels of real-time guarantees
  - relax performance
  - served by IP-based communication over Ethernet
- **Management Level**
  - typical IT infrastructure
  - Flexible data exchange within industrial systems
  - IT/OT(operation process) convergence
  - reuse of IT Technology in operation process
  - cost savings
  - ﬂexibility expected from future industrial networks in supporting a variety of applications
- Category of real-time requirements
  - **Non real-time**:
  - **Soft real-time**: realtime iter-action between devices and/or human
    - require low latency 
    - not necessary tight time sync
    - tolerate some missed deadlines
  - **Hard realtime**: require **accurate** synchronization and timeliness (**bounded latency**)
    - isochronous
    - mainly at the ﬁeld and cell levels.
    - Wireless networks have been used primarily in non-real-time applications and in a few soft real-time applications

### Wireless Netweorks in Industrial Environments
- the deployment of wireless technologies is only at its infancy (無線技術的部署還處於起步階段)
  - **AI** application and movement to ensure **flexible data access** driving deployment of wireless technologies. 
- **IEEE 802.15.4**: 
  - several PHY modes for operation in the 2.4-GHz and sub-GHz (868/916 MHz) unlicensed bands
  - also several MAC layer modes
  - CSMA-based communication: device sensing channel before transmission, back-off when busy
  - data rate up-to 250Kbps for 2-M BW in 2.4G 
  - **ZigBee**
    - ZigBee defines networking and transport protocol of 802.15.4.
    - non-realtime application
  - **802.15.4g**: New PHY for long range and higher data rate.
       
- **IEEE 802.15.4e**: 
  - TSCH(Time-Synchronized Channel Hopping) access
  - High reliability and power-saving
  - Enable **low power consumption** with better control of **latency** compared to CSMA protocols
  - can be used across a mesh network
  - TSCH mode may also be used with the more recent 802.15.4g mode
  - 6TiSCH: define an IPv6 compatible layer to enable conﬁguration and exchange of schedules in a TSCH network
    ![Imgur](https://i.imgur.com/5Qs4PHx.png) 
  
- **Bluetooth**:
  - local connectivity between phones and other consumer devices operating in the 2.4-GHz band
  - a frequency hopping PHY
  - BT1.2: 1Mbps, BT2.0: EDR, BT3.0: highspeed, BT4.0: BLE, for low power
  - Add mesh capability
  - play a role in many HMI(human machine interface) and wearable applications in industrial environments
  - mesh capability enable sensor network application.
- **IEEE 802.11 Wi-Fi**
  - consumer, enterprise, and industrial markets, mainly for general IT connectivity
  - a, b, g, n, and ac from 2007
  - currently mainly 11n/11ac for OFDM and MIMO capability to very high data rate.
  - 11ax next major release: enable multi-user transmission simultaneously.
  - MAC:
    - Based on CSMA 
    - Enhanced QoS: enables trafﬁc prioritization through four main access categories(voice, video, best-effort and backgroud)
    - Contention free polling-based options(PCF,HCCA), but not supported in practice for mainstream Wi-Fi provider
  - been used in industrial applications.
  - has great potential to enable fast IT/OT convergence and ﬂexibility in the manufacturing processes.
- **Cellular Technologies**:
  - machine-to-machine communications
  - have been used mainly in industrial systems
  - GPRS, 3G, LTE-m, NB-IOT
  - Goal to reduce power consumption and cost. but not provide realtime performance.
- **LPWAN**: 
  - Sub1g communication
  - SigFox/LORA
  - very low throughput over wide areas without hard latency and reliability requirements (mostly nonreal time)

### IEEE 802.1 TSN

- Enable time synchronization, control congestion, and packet loss due to media or device failure
  - mainly assuming **Ethernet** as layer 2 transport 
- subset of TSN standard and capability
![Imgur](https://i.imgur.com/hsTpyON.png)

- TSN mechanism
  - Time Synchronization:
    - 802.1AS: PTP deﬁned by IEEE 1588 to enable **precise time
synchronization** across the network
  - QoS Provisioning(供應): 
    - 802.1Qbv: deﬁne a global time-aware schedule to control congestion and provide deterministic latency.
    - 802.1Qbu and 802.3br: to reduce latency for high priority frames.
    - 802.1CB: introduce redundancy through frame duplication and elimination to reduce impact of pakcet loss
frame duplication and elimination
  - Trafﬁc Identiﬁcation: TSN devices must differentiate **time-sensitive** streams from other ﬂows
    - 802.1Q: identify and differentiate time-sensitive types from other types of trafﬁc, 
      - VLAN tag ﬁeld
      - trafﬁc classes: eight trafﬁc classes per Ethernet port, each associated to a dedicate queue
  - Network Conﬁguration:
    - 802.1Qcc and 802.1Qca: CNC model and stream reservation capabilities
    - 802.1Qci: policing and ﬁltering mechanisms to ensure nodes follow the conﬁgured schedules and avoid malicious behavior.

## CHALLENGES FOR WIRELESS TSN

- Two fundamental problems: 
  - latency and jitter caused by network congestion
  - packet losses 
- Wired link
  - constant capacity and 
  - extremely low packet error rate
  - bandwidth reservation can guarantees latency/jitter
  - preemption avoid interference from best effort traffic
  - redundancy path reduce loss from HW.
- Two fundamental different of Wireless media to Wired
  - Variable capability
  - Typically high per
  - Make challenges in providing deterministic latency and reliability guarantees expected by time-sensitive applications.

### Wireless Channel Variations

- Wireless channel capability is dynamic.(from fading, interference, ranges...)
- high capacity and bounded latency is not always possible.
- Understand Channel behavior is key to access achievable latency, reliability and capability
- 11n/11ac: TGN-channel model for indoor and statistic outdoor
- 11ax:  ITU-R channel and Doppler fading.
- Channel models are generic enough to statistically represent a plethora of propagation environments
- Ray-tracing tool for analysis of the well-defined environments, 
  - providing coverage maps
  - fading statistic
  - power-delay profiles
  - rms delay
  - coherence bandwidth....

### Channel Access Latency

- major source of latency in LTE:
  - grant acquisition
  - random access procedures
- major latency source in WiFi: 
  - listen-before-talk (LBT) channel
  - increasing access delay when increasing of devices.
  - randomess of LBT protocol is the key issue for hard realtime application.
- Need to support ultralow-latency service with deterministic access to medium and low-jitter
- Multiple-access technologies:
  - FDMA,TDMA,CDMA,OFDMA,SDMA,NOVA 
    - OFDMA + SDMA has been adopted in current cellular and Wi-Fi 
    - NOMA: non-orthogonal multiple access
      - new approach, but receiver need to perform successive cancellation.
      - not been adopted in major wireless standards
  - Multichannel access strategies
    - the device to access multiple channels and initiate multiple data transmissions independently
    - need multiple radios to sense and contend for access simultaneously in multiple channels

    <img src="https://i.imgur.com/wt69z2h.png" style="width: 450px" align="center"/>
  
  - Latency-speciﬁc optimizations should cvonsider the unique and dynamic characteristics of wireless channels and links.

### Centralized Coordination and Scheduling

- hard to control latency through distributed random access, expecially under congestion
- Need centralized coordination of medium access
  - 3GPP: NodeB/eNodeB/gNodeB
  - Wi-Fi: traffice is scheduled by AP, scheduling becomes important in 11ax OFDMA.
- (New) scheduling algorithm need to consider
  - throughput, fairness, and plus stringent **latency** and **reliability**.
- Distribute schedule information to devices
  - 3GPP: devices are assigned deterministic access opportunities once admitted
  - Wi-Fi: transmitted by the AP before every transmission opportunity

### Interference and Coexistence

- Not problem in Wired communication.
- More challenge in requirements of both TSN and non-TSN traffic in a converged network.
- Non-time-sensitive traffic: multiple retransmission to ensure payload delivey
- Opportunity retransmission is limitted in hard-real-time traffic.
- Interference sources: 
  - other kind devices(protocol) in the same channel band.
  - self-interference due to schedule coflict
  - RF emmissions: microwave ovens, electrical machinery, welding arches, power plants, cablings
    - dominantly contained in the sub1G band, and may have little or no effect in higher bands (2.4G,5G)
    - [RelCovAir](https://www.celticnext.eu/project-reicovair/) project: Real experiments in industrial environments

## NEW APPROACHES TO EXTEND TSN CONCEPTS TO WIRELESS